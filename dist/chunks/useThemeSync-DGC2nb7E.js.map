{"version":3,"file":"useThemeSync-DGC2nb7E.js","sources":["../../src/composables/useGlobals.ts","../../src/composables/useThemeSync.ts"],"sourcesContent":["import { getCurrentInstance } from \"vue\";\r\nimport type { notify as notifyFn } from \"../utils/notify\";\r\nimport type { loading as loadingFn } from \"../utils/loading\";\r\nimport type { confirm as confirmFn } from \"../utils/confirm\";\r\n\r\nexport function useGlobals() {\r\n  const instance = getCurrentInstance();\r\n\r\n  if (!instance) {\r\n    throw new Error(\"useGlobals must be called within setup()\");\r\n  }\r\n\r\n  const $notify = instance.appContext.config.globalProperties.$notify;\r\n  const $loading = instance.appContext.config.globalProperties.$loading;\r\n  const $confirm = instance.appContext.config.globalProperties.$confirm;\r\n\r\n  return {\r\n    notify: $notify as typeof notifyFn,\r\n    loading: $loading as typeof loadingFn,\r\n    confirm: $confirm as typeof confirmFn,\r\n  };\r\n}\r\n","import { watch, onMounted } from \"vue\";\r\nimport { useTheme as useVuetifyTheme } from \"vuetify\";\r\nimport { useThemeStore } from \"../stores/theme\";\r\n\r\nexport function useThemeSync() {\r\n  const themeStore = useThemeStore();\r\n  const vuetifyTheme = useVuetifyTheme();\r\n\r\n  function applyColorsToVuetify() {\r\n    if (!themeStore.themeConfig) return;\r\n\r\n    const colors = themeStore.currentColors;\r\n    Object.keys(colors).forEach((key) => {\r\n      if (vuetifyTheme.themes.value[themeStore.currentMode]) {\r\n        vuetifyTheme.themes.value[themeStore.currentMode].colors[key] =\r\n          colors[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  function updateVuetifyThemeMode() {\r\n    vuetifyTheme.change(themeStore.currentMode);\r\n  }\r\n\r\n  function syncTheme() {\r\n    if (!themeStore.themeConfig) return;\r\n\r\n    applyColorsToVuetify();\r\n    updateVuetifyThemeMode();\r\n  }\r\n\r\n  onMounted(() => {\r\n    syncTheme();\r\n  });\r\n\r\n  watch(\r\n    () => themeStore.currentMode,\r\n    () => {\r\n      syncTheme();\r\n    }\r\n  );\r\n\r\n  watch(\r\n    () => themeStore.currentColors,\r\n    () => {\r\n      syncTheme();\r\n    },\r\n    { deep: true }\r\n  );\r\n\r\n  return {\r\n    syncTheme,\r\n  };\r\n}\r\n"],"names":["useGlobals","instance","getCurrentInstance","$notify","$loading","$confirm","useThemeSync","themeStore","useThemeStore","vuetifyTheme","useVuetifyTheme","applyColorsToVuetify","colors","key","updateVuetifyThemeMode","syncTheme","onMounted","watch"],"mappings":";;;AAKO,SAASA,IAAa;AAC3B,QAAMC,IAAWC,EAAA;AAEjB,MAAI,CAACD;AACH,UAAM,IAAI,MAAM,0CAA0C;AAG5D,QAAME,IAAUF,EAAS,WAAW,OAAO,iBAAiB,SACtDG,IAAWH,EAAS,WAAW,OAAO,iBAAiB,UACvDI,IAAWJ,EAAS,WAAW,OAAO,iBAAiB;AAE7D,SAAO;AAAA,IACL,QAAQE;AAAA,IACR,SAASC;AAAA,IACT,SAASC;AAAA,EAAA;AAEb;ACjBO,SAASC,IAAe;AAC7B,QAAMC,IAAaC,EAAA,GACbC,IAAeC,EAAA;AAErB,WAASC,IAAuB;AAC9B,QAAI,CAACJ,EAAW,YAAa;AAE7B,UAAMK,IAASL,EAAW;AAC1B,WAAO,KAAKK,CAAM,EAAE,QAAQ,CAACC,MAAQ;AACnC,MAAIJ,EAAa,OAAO,MAAMF,EAAW,WAAW,MAClDE,EAAa,OAAO,MAAMF,EAAW,WAAW,EAAE,OAAOM,CAAG,IAC1DD,EAAOC,CAAG;AAAA,IAEhB,CAAC;AAAA,EACH;AAEA,WAASC,IAAyB;AAChC,IAAAL,EAAa,OAAOF,EAAW,WAAW;AAAA,EAC5C;AAEA,WAASQ,IAAY;AACnB,IAAKR,EAAW,gBAEhBI,EAAA,GACAG,EAAA;AAAA,EACF;AAEA,SAAAE,EAAU,MAAM;AACd,IAAAD,EAAA;AAAA,EACF,CAAC,GAEDE;AAAA,IACE,MAAMV,EAAW;AAAA,IACjB,MAAM;AACJ,MAAAQ,EAAA;AAAA,IACF;AAAA,EAAA,GAGFE;AAAA,IACE,MAAMV,EAAW;AAAA,IACjB,MAAM;AACJ,MAAAQ,EAAA;AAAA,IACF;AAAA,IACA,EAAE,MAAM,GAAA;AAAA,EAAK,GAGR;AAAA,IACL,WAAAA;AAAA,EAAA;AAEJ;"}