{"version":3,"file":"theme-CCYjaYW3.js","sources":["../../../src/stores/theme.ts"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport { ref, computed } from \"vue\";\r\n\r\nexport interface ThemeConfig {\r\n  name: string;\r\n  version: string;\r\n  logo: {\r\n    light: string;\r\n    dark: string;\r\n    favicon: string;\r\n  };\r\n  colors: {\r\n    light: Record<string, string>;\r\n    dark: Record<string, string>;\r\n  };\r\n  fonts: {\r\n    primary: string;\r\n    monospace: string;\r\n  };\r\n  customization: {\r\n    appName: string;\r\n    appDescription: string;\r\n    copyrightText: string;\r\n  };\r\n}\r\n\r\nexport const useThemeStore = defineStore(\"theme\", () => {\r\n  const themeConfig = ref<ThemeConfig | null>(null);\r\n  const isDark = ref(false);\r\n  const isLoading = ref(true);\r\n\r\n  const currentMode = computed(() => (isDark.value ? \"dark\" : \"light\"));\r\n  const currentLogo = computed(\r\n    () => themeConfig.value?.logo[currentMode.value] || \"\"\r\n  );\r\n  const currentColors = computed(\r\n    () => themeConfig.value?.colors[currentMode.value] || {}\r\n  );\r\n  const appName = computed(\r\n    () => themeConfig.value?.customization.appName || \"Vue3 Base\"\r\n  );\r\n  const favicon = computed(() => themeConfig.value?.logo.favicon || \"\");\r\n\r\n  function loadSavedThemePreference() {\r\n    const savedTheme = localStorage.getItem(\"app-theme\");\r\n    isDark.value = savedTheme === \"dark\";\r\n  }\r\n\r\n  function applyThemeToVuetify() {\r\n    if (!themeConfig.value) return;\r\n\r\n    const html = document.documentElement;\r\n    html.setAttribute(\"data-theme\", currentMode.value);\r\n\r\n    // Update favicon\r\n    updateFavicon();\r\n\r\n    window.dispatchEvent(\r\n      new CustomEvent(\"theme-changed\", {\r\n        detail: {\r\n          mode: currentMode.value,\r\n          colors: currentColors.value,\r\n        },\r\n      })\r\n    );\r\n  }\r\n\r\n  function updateFavicon() {\r\n    if (!favicon.value) return;\r\n\r\n    const existingLinks = document.querySelectorAll(\"link[rel*='icon']\");\r\n    existingLinks.forEach((link) => link.remove());\r\n\r\n    const link = document.createElement(\"link\");\r\n    link.rel = \"icon\";\r\n    link.href = favicon.value;\r\n    document.head.appendChild(link);\r\n  }\r\n\r\n  async function loadTheme() {\r\n    try {\r\n      isLoading.value = true;\r\n      const response = await fetch(\"/theme.json\");\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to load theme configuration\");\r\n      }\r\n      themeConfig.value = await response.json();\r\n\r\n      loadSavedThemePreference();\r\n      applyThemeToVuetify();\r\n    } catch (error) {\r\n      console.error(\"Error loading theme:\", error);\r\n    } finally {\r\n      isLoading.value = false;\r\n    }\r\n  }\r\n\r\n  function toggleTheme() {\r\n    isDark.value = !isDark.value;\r\n    localStorage.setItem(\"app-theme\", currentMode.value);\r\n    applyThemeToVuetify();\r\n  }\r\n\r\n  function setTheme(mode: \"light\" | \"dark\") {\r\n    isDark.value = mode === \"dark\";\r\n    localStorage.setItem(\"app-theme\", mode);\r\n    applyThemeToVuetify();\r\n  }\r\n\r\n  function updateThemeColors(colors: Record<string, string>) {\r\n    if (!themeConfig.value) return;\r\n\r\n    themeConfig.value.colors[currentMode.value] = {\r\n      ...themeConfig.value.colors[currentMode.value],\r\n      ...colors,\r\n    };\r\n    applyThemeToVuetify();\r\n  }\r\n\r\n  return {\r\n    themeConfig,\r\n    isDark,\r\n    isLoading,\r\n    currentMode,\r\n    currentLogo,\r\n    currentColors,\r\n    appName,\r\n    favicon,\r\n    loadTheme,\r\n    toggleTheme,\r\n    setTheme,\r\n    updateThemeColors,\r\n  };\r\n});\r\n"],"names":["useThemeStore","defineStore","themeConfig","ref","isDark","isLoading","currentMode","computed","currentLogo","currentColors","appName","favicon","loadSavedThemePreference","savedTheme","applyThemeToVuetify","updateFavicon","link","loadTheme","response","error","toggleTheme","setTheme","mode","updateThemeColors","colors"],"mappings":";;AA0BO,MAAMA,IAAgBC,EAAY,SAAS,MAAM;AACtD,QAAMC,IAAcC,EAAwB,IAAI,GAC1CC,IAASD,EAAI,EAAK,GAClBE,IAAYF,EAAI,EAAI,GAEpBG,IAAcC,EAAS,MAAOH,EAAO,QAAQ,SAAS,OAAQ,GAC9DI,IAAcD;AAAA,IAClB,MAAML,EAAY,OAAO,KAAKI,EAAY,KAAK,KAAK;AAAA,EAAA,GAEhDG,IAAgBF;AAAA,IACpB,MAAML,EAAY,OAAO,OAAOI,EAAY,KAAK,KAAK,CAAA;AAAA,EAAC,GAEnDI,IAAUH;AAAA,IACd,MAAML,EAAY,OAAO,cAAc,WAAW;AAAA,EAAA,GAE9CS,IAAUJ,EAAS,MAAML,EAAY,OAAO,KAAK,WAAW,EAAE;AAEpE,WAASU,IAA2B;AAClC,UAAMC,IAAa,aAAa,QAAQ,WAAW;AACnD,IAAAT,EAAO,QAAQS,MAAe;AAAA,EAChC;AAEA,WAASC,IAAsB;AAC7B,QAAI,CAACZ,EAAY,MAAO;AAGxB,IADa,SAAS,gBACjB,aAAa,cAAcI,EAAY,KAAK,GAGjDS,EAAA,GAEA,OAAO;AAAA,MACL,IAAI,YAAY,iBAAiB;AAAA,QAC/B,QAAQ;AAAA,UACN,MAAMT,EAAY;AAAA,UAClB,QAAQG,EAAc;AAAA,QAAA;AAAA,MACxB,CACD;AAAA,IAAA;AAAA,EAEL;AAEA,WAASM,IAAgB;AACvB,QAAI,CAACJ,EAAQ,MAAO;AAGpB,IADsB,SAAS,iBAAiB,mBAAmB,EACrD,QAAQ,CAACK,MAASA,EAAK,QAAQ;AAE7C,UAAMA,IAAO,SAAS,cAAc,MAAM;AAC1C,IAAAA,EAAK,MAAM,QACXA,EAAK,OAAOL,EAAQ,OACpB,SAAS,KAAK,YAAYK,CAAI;AAAA,EAChC;AAEA,iBAAeC,IAAY;AACzB,QAAI;AACF,MAAAZ,EAAU,QAAQ;AAClB,YAAMa,IAAW,MAAM,MAAM,aAAa;AAC1C,UAAI,CAACA,EAAS;AACZ,cAAM,IAAI,MAAM,oCAAoC;AAEtD,MAAAhB,EAAY,QAAQ,MAAMgB,EAAS,KAAA,GAEnCN,EAAA,GACAE,EAAA;AAAA,IACF,SAASK,GAAO;AACd,cAAQ,MAAM,wBAAwBA,CAAK;AAAA,IAC7C,UAAA;AACE,MAAAd,EAAU,QAAQ;AAAA,IACpB;AAAA,EACF;AAEA,WAASe,IAAc;AACrB,IAAAhB,EAAO,QAAQ,CAACA,EAAO,OACvB,aAAa,QAAQ,aAAaE,EAAY,KAAK,GACnDQ,EAAA;AAAA,EACF;AAEA,WAASO,EAASC,GAAwB;AACxC,IAAAlB,EAAO,QAAQkB,MAAS,QACxB,aAAa,QAAQ,aAAaA,CAAI,GACtCR,EAAA;AAAA,EACF;AAEA,WAASS,EAAkBC,GAAgC;AACzD,IAAKtB,EAAY,UAEjBA,EAAY,MAAM,OAAOI,EAAY,KAAK,IAAI;AAAA,MAC5C,GAAGJ,EAAY,MAAM,OAAOI,EAAY,KAAK;AAAA,MAC7C,GAAGkB;AAAA,IAAA,GAELV,EAAA;AAAA,EACF;AAEA,SAAO;AAAA,IACL,aAAAZ;AAAA,IACA,QAAAE;AAAA,IACA,WAAAC;AAAA,IACA,aAAAC;AAAA,IACA,aAAAE;AAAA,IACA,eAAAC;AAAA,IACA,SAAAC;AAAA,IACA,SAAAC;AAAA,IACA,WAAAM;AAAA,IACA,aAAAG;AAAA,IACA,UAAAC;AAAA,IACA,mBAAAE;AAAA,EAAA;AAEJ,CAAC;"}