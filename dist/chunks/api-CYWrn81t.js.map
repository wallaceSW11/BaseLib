{"version":3,"file":"api-CYWrn81t.js","sources":["../../src/utils/vuetify-check.ts","../../src/utils/api.ts"],"sourcesContent":["import type { App } from \"vue\";\r\n\r\n/**\r\n * Verifica se o Vuetify estÃ¡ registrado no app Vue.\r\n * Emite um aviso no console se nÃ£o estiver presente.\r\n *\r\n * @param app - InstÃ¢ncia do aplicativo Vue\r\n */\r\nexport function ensureVuetify(app: App): void {\r\n  // Acessando propriedades internas do Vue para verificar se Vuetify estÃ¡ registrado\r\n  const appContext = (app as any)._context;\r\n  const provides = appContext?.provides;\r\n  const globalProperties = app.config.globalProperties;\r\n  \r\n  // Verifica se hÃ¡ alguma referÃªncia ao Vuetify em mÃºltiplos locais\r\n  const vuetifyInstance = \r\n    provides?.vuetify || \r\n    provides?.$vuetify ||\r\n    globalProperties?.$vuetify ||\r\n    globalProperties?.vuetify;\r\n  \r\n  // Verifica tambÃ©m se hÃ¡ sÃ­mbolos do Vuetify (Vuetify 3 usa Symbol para injeÃ§Ã£o)\r\n  const hasVuetifySymbol = provides && Object.getOwnPropertySymbols(provides).some(\r\n    sym => {\r\n      const symbolStr = sym.toString();\r\n      return symbolStr.includes('vuetify') || symbolStr.includes('Vuetify');\r\n    }\r\n  );\r\n\r\n  // Verifica se os componentes do Vuetify estÃ£o registrados\r\n  const hasVuetifyComponents = appContext?.components && \r\n    Object.keys(appContext.components).some(name => name.startsWith('V'));\r\n\r\n  const hasVuetify = vuetifyInstance || hasVuetifySymbol || hasVuetifyComponents;\r\n\r\n  if (!hasVuetify) {\r\n    console.warn(\r\n      \"[BaseLib] âš ï¸ Vuetify nÃ£o detectado!\\n\" +\r\n        \"Certifique-se de chamar app.use(vuetify) ANTES de setupLib(app).\\n\" +\r\n        \"Exemplo:\\n\" +\r\n        \"  import { createVuetify } from 'vuetify'\\n\" +\r\n        \"  const vuetify = createVuetify()\\n\" +\r\n        \"  app.use(vuetify)\\n\" +\r\n        \"  setupLib(app)\"\r\n    );\r\n  } else {\r\n    console.log(\"[BaseLib] âœ… Vuetify detectado com sucesso\");\r\n  }\r\n}\r\n\r\n/**\r\n * Debug helper: Verifica mÃºltiplas instÃ¢ncias do Vuetify e containers de overlay.\r\n * Use em desenvolvimento para diagnosticar problemas com v-dialog, v-select, etc.\r\n * \r\n * @example\r\n * import { debugVuetifyInstances } from '@wallacesw11/base-lib'\r\n * debugVuetifyInstances()\r\n */\r\nexport function debugVuetifyInstances(): void {\r\n  console.group(\"ðŸ” Vuetify Debug Info\");\r\n\r\n  // 1. Verificar containers de overlay\r\n  const overlayContainers = document.querySelectorAll(\".v-overlay-container\");\r\n  console.log(`ðŸ“¦ Overlay containers encontrados: ${overlayContainers.length}`);\r\n  overlayContainers.forEach((container, index) => {\r\n    console.log(`  [${index}]`, container);\r\n  });\r\n\r\n  // 2. Verificar v-application\r\n  const vApps = document.querySelectorAll(\".v-application\");\r\n  console.log(`ðŸŽ¨ v-application encontrados: ${vApps.length}`);\r\n  vApps.forEach((app, index) => {\r\n    console.log(`  [${index}]`, app);\r\n  });\r\n\r\n  // 3. Verificar overlays ativos\r\n  const overlays = document.querySelectorAll(\".v-overlay\");\r\n  console.log(`ðŸ“Š Overlays ativos: ${overlays.length}`);\r\n  overlays.forEach((overlay, index) => {\r\n    const isActive = overlay.classList.contains(\"v-overlay--active\");\r\n    console.log(`  [${index}] Active: ${isActive}`, overlay);\r\n  });\r\n\r\n  // 4. Verificar menus ativos\r\n  const menus = document.querySelectorAll(\".v-menu\");\r\n  console.log(`ðŸ” Menus encontrados: ${menus.length}`);\r\n  menus.forEach((menu, index) => {\r\n    console.log(`  [${index}]`, menu);\r\n  });\r\n\r\n  // 5. Verificar selects\r\n  const selects = document.querySelectorAll(\".v-select\");\r\n  console.log(`ðŸ“‹ v-select encontrados: ${selects.length}`);\r\n  selects.forEach((select, index) => {\r\n    console.log(`  [${index}]`, select);\r\n  });\r\n\r\n  // 6. Avisos\r\n  if (overlayContainers.length > 1) {\r\n    console.warn(\r\n      \"âš ï¸ MÃšLTIPLOS OVERLAY CONTAINERS DETECTADOS!\\n\" +\r\n        \"Isso indica que pode haver mÃºltiplas instÃ¢ncias do Vuetify.\\n\" +\r\n        \"SoluÃ§Ã£o: Certifique-se de ter apenas uma instÃ¢ncia do Vuetify registrada.\"\r\n    );\r\n  }\r\n\r\n  if (overlayContainers.length === 0) {\r\n    console.warn(\r\n      \"âš ï¸ NENHUM OVERLAY CONTAINER ENCONTRADO!\\n\" +\r\n        \"O Vuetify pode nÃ£o estar inicializado corretamente.\\n\" +\r\n        \"Verifique se vocÃª chamou app.use(vuetify) no main.ts\"\r\n    );\r\n  }\r\n\r\n  console.groupEnd();\r\n}\r\n","import axios, {\r\n  type InternalAxiosRequestConfig,\r\n  type AxiosResponse,\r\n  type AxiosError,\r\n} from \"axios\";\r\nimport { loading } from \"./loading\";\r\nimport { notify } from \"./notify\";\r\nimport { API_TIMEOUT } from \"./types\";\r\n\r\nexport interface ApiConfig {\r\n  baseURL?: string;\r\n  timeout?: number;\r\n  showLoadingOnMutations?: boolean;\r\n  showErrorNotifications?: boolean;\r\n  authTokenKey?: string;\r\n  onUnauthorized?: () => void;\r\n}\r\n\r\nconst defaultConfig: ApiConfig = {\r\n  baseURL: import.meta.env.VITE_API_BASE_URL || \"/api\",\r\n  timeout: API_TIMEOUT,\r\n  showLoadingOnMutations: true,\r\n  showErrorNotifications: true,\r\n  authTokenKey: \"auth_token\",\r\n  onUnauthorized: () => {\r\n    localStorage.removeItem(\"auth_token\");\r\n    window.location.href = \"/login\";\r\n  },\r\n};\r\n\r\nlet currentConfig = { ...defaultConfig };\r\n\r\nconst api = axios.create({\r\n  baseURL: currentConfig.baseURL,\r\n  timeout: currentConfig.timeout,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport function configureApi(config: Partial<ApiConfig>) {\r\n  currentConfig = { ...currentConfig, ...config };\r\n  \r\n  if (config.baseURL) {\r\n    api.defaults.baseURL = config.baseURL;\r\n  }\r\n  if (config.timeout) {\r\n    api.defaults.timeout = config.timeout;\r\n  }\r\n}\r\n\r\nfunction addAuthTokenToRequest(config: InternalAxiosRequestConfig) {\r\n  const token = localStorage.getItem(currentConfig.authTokenKey!);\r\n  if (token && config.headers) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n}\r\n\r\nfunction showLoadingForMutations(config: InternalAxiosRequestConfig) {\r\n  if (currentConfig.showLoadingOnMutations && config.method !== \"get\") {\r\n    loading.show(\"Processing...\");\r\n  }\r\n}\r\n\r\napi.interceptors.request.use(\r\n  (config: InternalAxiosRequestConfig) => {\r\n    addAuthTokenToRequest(config);\r\n    showLoadingForMutations(config);\r\n    return config;\r\n  },\r\n  (error: AxiosError) => {\r\n    loading.hide();\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nfunction handleUnauthorized() {\r\n  if (currentConfig.showErrorNotifications) {\r\n    notify.error(\"Unauthorized\", \"Please log in again\");\r\n  }\r\n  if (currentConfig.onUnauthorized) {\r\n    currentConfig.onUnauthorized();\r\n  }\r\n}\r\n\r\nfunction handleErrorResponse(error: AxiosError) {\r\n  if (!currentConfig.showErrorNotifications) {\r\n    return;\r\n  }\r\n\r\n  if (!error.response) {\r\n    if (error.request) {\r\n      notify.error(\"Network Error\", \"Unable to connect to the server\");\r\n    } else {\r\n      notify.error(\"Error\", error.message);\r\n    }\r\n    return;\r\n  }\r\n\r\n  const status = error.response.status;\r\n  const message = (error.response.data as any)?.message || \"An error occurred\";\r\n\r\n  switch (status) {\r\n    case 401:\r\n      handleUnauthorized();\r\n      break;\r\n    case 403:\r\n      notify.error(\r\n        \"Forbidden\",\r\n        \"You do not have permission to perform this action\"\r\n      );\r\n      break;\r\n    case 404:\r\n      notify.error(\"Not Found\", \"The requested resource was not found\");\r\n      break;\r\n    case 500:\r\n      notify.error(\r\n        \"Server Error\",\r\n        \"Internal server error. Please try again later.\"\r\n      );\r\n      break;\r\n    default:\r\n      notify.error(\"Error\", message);\r\n  }\r\n}\r\n\r\napi.interceptors.response.use(\r\n  (response: AxiosResponse) => {\r\n    loading.hide();\r\n    return response;\r\n  },\r\n  (error: AxiosError) => {\r\n    loading.hide();\r\n    handleErrorResponse(error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":["ensureVuetify","app","appContext","provides","globalProperties","vuetifyInstance","hasVuetifySymbol","sym","symbolStr","hasVuetifyComponents","name","debugVuetifyInstances","overlayContainers","container","index","vApps","overlays","overlay","isActive","menus","menu","selects","select","defaultConfig","API_TIMEOUT","currentConfig","api","axios","addAuthTokenToRequest","config","token","showLoadingForMutations","loading","error","handleUnauthorized","notify","handleErrorResponse","status","message","response"],"mappings":"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"}