{"version":3,"file":"useThemeSync-DETKZagE.js","sources":["../../src/composables/useGlobals.ts","../../src/composables/useThemeSync.ts"],"sourcesContent":["import { getCurrentInstance } from \"vue\";\r\nimport type { notify as notifyFn } from \"../utils/notify\";\r\nimport type { loading as loadingFn } from \"../utils/loading\";\r\nimport type { confirm as confirmFn } from \"../utils/confirm\";\r\n\r\nexport function useGlobals() {\r\n  const instance = getCurrentInstance();\r\n\r\n  if (!instance) {\r\n    throw new Error(\"useGlobals must be called within setup()\");\r\n  }\r\n\r\n  const $notify = instance.appContext.config.globalProperties.$notify;\r\n  const $loading = instance.appContext.config.globalProperties.$loading;\r\n  const $confirm = instance.appContext.config.globalProperties.$confirm;\r\n\r\n  return {\r\n    notify: $notify as typeof notifyFn,\r\n    loading: $loading as typeof loadingFn,\r\n    confirm: $confirm as typeof confirmFn,\r\n  };\r\n}\r\n","import { watch, onMounted } from \"vue\";\r\nimport { useTheme as useVuetifyTheme } from \"vuetify\";\r\nimport { useThemeStore } from \"../stores/theme\";\r\n\r\nexport function useThemeSync() {\r\n  const themeStore = useThemeStore();\r\n  const vuetifyTheme = useVuetifyTheme();\r\n\r\n  function applyColorsToVuetify() {\r\n    if (!themeStore.themeConfig) return;\r\n\r\n    const colors = themeStore.currentColors;\r\n    Object.keys(colors).forEach((key) => {\r\n      if (vuetifyTheme.themes.value[themeStore.currentMode]) {\r\n        vuetifyTheme.themes.value[themeStore.currentMode].colors[key] =\r\n          colors[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  function updateVuetifyThemeMode() {\r\n    vuetifyTheme.change(themeStore.currentMode);\r\n  }\r\n\r\n  function syncTheme() {\r\n    if (!themeStore.themeConfig) return;\r\n\r\n    applyColorsToVuetify();\r\n    updateVuetifyThemeMode();\r\n  }\r\n\r\n  onMounted(() => {\r\n    syncTheme();\r\n  });\r\n\r\n  watch(\r\n    () => themeStore.currentMode,\r\n    () => {\r\n      syncTheme();\r\n    }\r\n  );\r\n\r\n  watch(\r\n    () => themeStore.currentColors,\r\n    () => {\r\n      syncTheme();\r\n    },\r\n    { deep: true }\r\n  );\r\n\r\n  return {\r\n    syncTheme,\r\n  };\r\n}\r\n"],"names":["useGlobals","instance","getCurrentInstance","$notify","$loading","$confirm","useThemeSync","themeStore","useThemeStore","vuetifyTheme","useVuetifyTheme","applyColorsToVuetify","colors","key","updateVuetifyThemeMode","syncTheme","onMounted","watch"],"mappings":"0FAKO,SAASA,GAAa,CAC3B,MAAMC,EAAWC,EAAAA,mBAAA,EAEjB,GAAI,CAACD,EACH,MAAM,IAAI,MAAM,0CAA0C,EAG5D,MAAME,EAAUF,EAAS,WAAW,OAAO,iBAAiB,QACtDG,EAAWH,EAAS,WAAW,OAAO,iBAAiB,SACvDI,EAAWJ,EAAS,WAAW,OAAO,iBAAiB,SAE7D,MAAO,CACL,OAAQE,EACR,QAASC,EACT,QAASC,CAAA,CAEb,CCjBO,SAASC,GAAe,CAC7B,MAAMC,EAAaC,EAAAA,cAAA,EACbC,EAAeC,EAAAA,SAAA,EAErB,SAASC,GAAuB,CAC9B,GAAI,CAACJ,EAAW,YAAa,OAE7B,MAAMK,EAASL,EAAW,cAC1B,OAAO,KAAKK,CAAM,EAAE,QAASC,GAAQ,CAC/BJ,EAAa,OAAO,MAAMF,EAAW,WAAW,IAClDE,EAAa,OAAO,MAAMF,EAAW,WAAW,EAAE,OAAOM,CAAG,EAC1DD,EAAOC,CAAG,EAEhB,CAAC,CACH,CAEA,SAASC,GAAyB,CAChCL,EAAa,OAAOF,EAAW,WAAW,CAC5C,CAEA,SAASQ,GAAY,CACdR,EAAW,cAEhBI,EAAA,EACAG,EAAA,EACF,CAEAE,OAAAA,EAAAA,UAAU,IAAM,CACdD,EAAA,CACF,CAAC,EAEDE,EAAAA,MACE,IAAMV,EAAW,YACjB,IAAM,CACJQ,EAAA,CACF,CAAA,EAGFE,EAAAA,MACE,IAAMV,EAAW,cACjB,IAAM,CACJQ,EAAA,CACF,EACA,CAAE,KAAM,EAAA,CAAK,EAGR,CACL,UAAAA,CAAA,CAEJ"}