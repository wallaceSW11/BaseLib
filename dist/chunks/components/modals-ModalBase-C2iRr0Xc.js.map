{"version":3,"file":"modals-ModalBase-C2iRr0Xc.js","sources":["../../../src/components/modals/ModalBase.vue"],"sourcesContent":["<template>\r\n  <v-dialog \r\n    v-model=\"isOpen\" \r\n    :max-width=\"maxWidth\" \r\n    :persistent=\"persistent\" \r\n    attach=\"body\"\r\n    :content-class=\"contentClass\"\r\n    :fullscreen=\"fullscreen\"\r\n    scrollable\r\n    :z-index=\"2400\"\r\n    @keydown=\"handleDialogKeydown\"\r\n  >\r\n    <v-card>\r\n      <v-card-title v-if=\"title\" class=\"text-h5 d-flex align-center px-6 pt-6\" style=\"word-break: break-word; white-space: normal;\">\r\n        <v-icon v-if=\"titleIcon\" class=\"mr-2\">{{ titleIcon }}</v-icon>\r\n        <span>{{ title }}</span>\r\n      </v-card-title>\r\n\r\n      <v-card-text class=\"px-6 pt-4\">\r\n        <slot>\r\n          {{ message }}\r\n        </slot>\r\n      </v-card-text>\r\n\r\n      <v-card-actions>\r\n        <v-spacer />\r\n        <v-btn\r\n          v-for=\"(action, index) in actions\"\r\n          :key=\"index\"\r\n          :color=\"action.color || 'primary'\"\r\n          :prepend-icon=\"action.icon\"\r\n          :variant=\"action.variant || 'text'\"\r\n          :type=\"'button'\"\r\n          class=\"text-none\"\r\n          @click=\"handleAction(action)\"\r\n        >\r\n          {{ action.text }}\r\n        </v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, watch, onMounted, onUnmounted } from 'vue'\r\n\r\nexport interface ModalAction {\r\n  text: string\r\n  icon?: string\r\n  color?: string\r\n  variant?: 'text' | 'flat' | 'elevated' | 'tonal' | 'outlined' | 'plain'\r\n  handler?: () => void | Promise<void>\r\n}\r\n\r\ninterface Props {\r\n  modelValue: boolean\r\n  title?: string\r\n  message?: string\r\n  maxWidth?: string | number\r\n  persistent?: boolean\r\n  actions?: ModalAction[]\r\n  /**\r\n   * Classes CSS customizadas para o conteúdo do dialog\r\n   */\r\n  contentClass?: string\r\n  /**\r\n   * Se true, o dialog ocupará toda a tela\r\n   * @default false\r\n   */\r\n  fullscreen?: boolean\r\n  /**\r\n   * Ícone a ser exibido ao lado do título\r\n   * @default undefined\r\n   */\r\n  titleIcon?: string\r\n}\r\n\r\nconst props = withDefaults(defineProps<Props>(), {\r\n  title: undefined,\r\n  message: '',\r\n  maxWidth: 500,\r\n  persistent: true,\r\n  actions: () => [],\r\n  contentClass: undefined,\r\n  fullscreen: false,\r\n  titleIcon: undefined,\r\n})\r\n\r\nconst emit = defineEmits<{\r\n  'update:modelValue': [value: boolean]\r\n  close: []\r\n}>()\r\n\r\nconst isOpen = ref(props.modelValue)\r\n\r\nwatch(() => props.modelValue, (newVal) => {\r\n  isOpen.value = newVal\r\n})\r\n\r\nwatch(isOpen, (newVal) => {\r\n  emit('update:modelValue', newVal)\r\n})\r\n\r\nconst handleAction = async (action: ModalAction) => {\r\n  if (action.handler) {\r\n    await action.handler()\r\n  }\r\n}\r\n\r\n// Keyboard shortcuts - captura direto do dialog\r\nconst handleDialogKeydown = (e: KeyboardEvent) => {\r\n  if (props.actions.length === 0) return\r\n\r\n  // ESC - aciona o botão secundário (cancelar)\r\n  if (e.key === 'Escape') {\r\n    const cancelAction = props.actions.find(a => \r\n      a.color === 'secondary' || a.color === 'error'\r\n    )\r\n    if (cancelAction) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      handleAction(cancelAction)\r\n    }\r\n  }\r\n\r\n  // ENTER - aciona o botão primário (confirmar)\r\n  if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey && !e.altKey) {\r\n    // Ignora se o foco está em um textarea\r\n    const target = e.target as HTMLElement\r\n    if (target.tagName === 'TEXTAREA') return\r\n\r\n    const primaryAction = props.actions.find(a => \r\n      a.color === 'primary' || (!a.color && props.actions.indexOf(a) === props.actions.length - 1)\r\n    )\r\n    if (primaryAction) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      handleAction(primaryAction)\r\n    }\r\n  }\r\n}\r\n\r\n// Keyboard shortcuts globais (fallback)\r\nonMounted(() => {\r\n  const handleKeydown = (e: KeyboardEvent) => {\r\n    // Só processa se o modal estiver aberto\r\n    if (!isOpen.value || props.actions.length === 0) return\r\n\r\n    // ESC - aciona o botão secundário (cancelar)\r\n    if (e.key === 'Escape' && !props.persistent) {\r\n      const cancelAction = props.actions.find(a => \r\n        a.color === 'secondary' || a.color === 'error'\r\n      )\r\n      if (cancelAction) {\r\n        e.preventDefault()\r\n        handleAction(cancelAction)\r\n      }\r\n    }\r\n\r\n    // ENTER - aciona o botão primário (confirmar)\r\n    if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey && !e.altKey) {\r\n      // Ignora se o foco está em um textarea ou input de múltiplas linhas\r\n      const target = e.target as HTMLElement\r\n      if (target.tagName === 'TEXTAREA') return\r\n\r\n      const primaryAction = props.actions.find(a => \r\n        a.color === 'primary' || (!a.color && props.actions.indexOf(a) === props.actions.length - 1)\r\n      )\r\n      if (primaryAction) {\r\n        e.preventDefault()\r\n        handleAction(primaryAction)\r\n      }\r\n    }\r\n  }\r\n\r\n  window.addEventListener('keydown', handleKeydown)\r\n\r\n  onUnmounted(() => {\r\n    window.removeEventListener('keydown', handleKeydown)\r\n  })\r\n})\r\n</script>\r\n\r\n<style>\r\n/* Garante que menus do Vuetify (v-select, v-menu, etc.) fiquem acima dos modais */\r\n.v-overlay-container .v-menu > .v-overlay__content,\r\n.v-overlay-container .v-select__content,\r\n.v-overlay-container .v-autocomplete__content {\r\n  z-index: 2500 !important;\r\n}\r\n</style>\r\n"],"names":["props","__props","emit","__emit","isOpen","ref","watch","newVal","handleAction","action","handleDialogKeydown","cancelAction","primaryAction","a","onMounted","handleKeydown","e","onUnmounted","_createBlock","_component_v_dialog","$event","_createVNode","_component_v_card","_component_v_card_title","_component_v_icon","_createElementVNode","_component_v_card_text","_renderSlot","_ctx","_component_v_card_actions","_component_v_spacer","_openBlock","_createElementBlock","_Fragment","_renderList","index","_component_v_btn","_createTextVNode","_toDisplayString"],"mappings":"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"}